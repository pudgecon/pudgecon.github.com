<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Pudgecon's Blog]]></title>
  <link href="http://pudgecon.github.io/atom.xml" rel="self"/>
  <link href="http://pudgecon.github.io/"/>
  <updated>2013-08-23T09:26:22+00:00</updated>
  <id>http://pudgecon.github.io/</id>
  <author>
    <name><![CDATA[pudgecon]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Shared Directory on ProFTPD for All Users]]></title>
    <link href="http://pudgecon.github.io/blog/2013/08/23/shared-directory-on-proftpd-for-all-users/"/>
    <updated>2013-08-23T08:55:00+00:00</updated>
    <id>http://pudgecon.github.io/blog/2013/08/23/shared-directory-on-proftpd-for-all-users</id>
    <content type="html"><![CDATA[<h2>Ubuntu下为ProFTPD中每个单独用户建立公共目录</h2>

<p>在<code>ProFTPD</code>使用中，如果我们设置每个用户只能操作其对应的目录时，设置公共目录就成为一件比较麻烦的事。</p>

<p>本文采用<code>ProFTPD</code>提供的<code>mod_vroot</code>解决这个问题。</p>

<!-- more -->


<h3>安装<code>mod_vroot</code>模块：</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install proftpd-mod-vroot
</span></code></pre></td></tr></table></div></figure>


<h3>配置vroot</h3>

<ul>
<li>修改<code>/etc/proftpd/modules.conf</code>，添加如下语句，引入<code>mod_vroot</code>：</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>LoadModule mod_vroot.c
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>修改<code>/etc/proftpd/proftpd.conf</code>, 去掉下面语句的注释：</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Include /etc/proftpd/virtuals.conf
</span></code></pre></td></tr></table></div></figure>


<p><em>注意这里是使用 Ubuntu 的 apt 安装的 ProFTPD 的话，这句配置项是有错误的，需要修改！</em></p>

<ul>
<li>修改<code>/etc/proftpd/virtuals.conf</code>：</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;IfModule mod_vroot.c&gt;
</span><span class='line'>
</span><span class='line'>  VRootEngine on
</span><span class='line'>
</span><span class='line'>  DefaultRoot ~
</span><span class='line'>  VRootAlias /home/ftp/shared ~/shared
</span><span class='line'>
</span><span class='line'>&lt;/IfModule&gt;
</span></code></pre></td></tr></table></div></figure>


<p>这个配置表示，我们将<code>/home/ftp/shared</code>设置为共享目录，并映射为每个用户的<code>~/shared</code>。</p>

<ul>
<li>重启ProFTPD服务：</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>service proftpd restart
</span></code></pre></td></tr></table></div></figure>


<h2>参考资料</h2>

<ul>
<li><a href="http://www.castaglia.org/proftpd/modules/mod_vroot.html#VRootServerRoot">ProFTPD module mod_vroot</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Install OpenLDAP and ProFTPD on Ubuntu 12.04]]></title>
    <link href="http://pudgecon.github.io/blog/2013/08/23/install-openldap-and-proftpd-on-ubuntu-12-dot-04/"/>
    <updated>2013-08-23T08:06:00+00:00</updated>
    <id>http://pudgecon.github.io/blog/2013/08/23/install-openldap-and-proftpd-on-ubuntu-12-dot-04</id>
    <content type="html"><![CDATA[<h2>Ubuntu 12.04上实现ProFTPD基于OpenLDAP的LDAP身份认证</h2>

<h3>系统环境</h3>

<ul>
<li>操作系统：Ubuntu Server 12.04</li>
</ul>


<!-- more -->


<h3>安装OpenLDAP</h3>

<p><code>Ubuntu</code>上安装<code>OpenLDAP</code>比较简单：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install slapd ldap-utils
</span></code></pre></td></tr></table></div></figure>


<p>具体使用文档可以参考<a href="https://help.ubuntu.com/lts/serverguide/openldap-server.html">OpenLDAP的Ubuntu官方文档</a>。</p>

<h3>配置组织结构</h3>

<ul>
<li>添加新的<code>basedn</code>，这里以<code>dc=example,dc=com</code>为例：</li>
</ul>


<figure class='code'><figcaption><span> (backend.ldif)</span> <a href='http://pudgecon.github.io/downloads/code/openldap_and_proftpd/backend.ldif'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># Load dynamic backend modules</span>
</span><span class='line'>dn: <span class="nv">cn</span><span class="o">=</span>module,cn<span class="o">=</span>config
</span><span class='line'>objectClass: olcModuleList
</span><span class='line'>cn: module
</span><span class='line'>olcModulepath: /usr/lib/ldap
</span><span class='line'>olcModuleload: back_hdb.la
</span><span class='line'>
</span><span class='line'><span class="c"># Database settings</span>
</span><span class='line'>dn: <span class="nv">olcDatabase</span><span class="o">=</span>hdb,cn<span class="o">=</span>config
</span><span class='line'>objectClass: olcDatabaseConfig
</span><span class='line'>objectClass: olcHdbConfig
</span><span class='line'>olcDatabase: <span class="o">{</span>1<span class="o">}</span>hdb
</span><span class='line'>olcSuffix: <span class="nv">dc</span><span class="o">=</span>example,dc<span class="o">=</span>com
</span><span class='line'>olcDbDirectory: /var/lib/ldap
</span><span class='line'>olcRootDN: <span class="nv">cn</span><span class="o">=</span>admin,dc<span class="o">=</span>example,dc<span class="o">=</span>com
</span><span class='line'>olcRootPW: password
</span><span class='line'>olcDbConfig: set_cachesize 0 2097152 0
</span><span class='line'>olcDbConfig: set_lk_max_objects 1500
</span><span class='line'>olcDbConfig: set_lk_max_locks 1500
</span><span class='line'>olcDbConfig: set_lk_max_lockers 1500
</span><span class='line'>olcDbIndex: objectClass eq
</span><span class='line'>olcLastMod: TRUE
</span><span class='line'>olcDbCheckpoint: 512 30
</span><span class='line'>olcAccess: to <span class="nv">attrs</span><span class="o">=</span>userPassword by <span class="nv">dn</span><span class="o">=</span><span class="s2">&quot;cn=admin,dc=example,dc=com&quot;</span> write by anonymous auth by self write by * none
</span><span class='line'>olcAccess: to <span class="nv">attrs</span><span class="o">=</span>shadowLastChange by self write by * <span class="nb">read</span>
</span><span class='line'>olcAccess: to dn.base<span class="o">=</span><span class="s2">&quot;&quot;</span> by * <span class="nb">read</span>
</span><span class='line'>olcAccess: to * by <span class="nv">dn</span><span class="o">=</span><span class="s2">&quot;cn=admin,dc=example,dc=com&quot;</span> write by * <span class="nb">read</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>添加新的<code>groups</code>和<code>users</code>：</li>
</ul>


<figure class='code'><figcaption><span> (organization.ldif)</span> <a href='http://pudgecon.github.io/downloads/code/openldap_and_proftpd/organization.ldif'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># Create top-level object in domain</span>
</span><span class='line'>dn: <span class="nv">dc</span><span class="o">=</span>example,dc<span class="o">=</span>com
</span><span class='line'>objectClass: top
</span><span class='line'>objectClass: dcObject
</span><span class='line'>objectclass: organization
</span><span class='line'>o: Exmaple
</span><span class='line'>dc: example
</span><span class='line'>description: Comtech LDAP Configuration
</span><span class='line'>
</span><span class='line'><span class="c"># Admin user.</span>
</span><span class='line'>dn: <span class="nv">cn</span><span class="o">=</span>admin,dc<span class="o">=</span>example,dc<span class="o">=</span>com
</span><span class='line'>objectClass: simpleSecurityObject
</span><span class='line'>objectClass: organizationalRole
</span><span class='line'>cn: admin
</span><span class='line'>description: LDAP administrator
</span><span class='line'>userPassword: password
</span><span class='line'>
</span><span class='line'>dn: <span class="nv">ou</span><span class="o">=</span>users,dc<span class="o">=</span>example,dc<span class="o">=</span>com
</span><span class='line'>objectClass: organizationalUnit
</span><span class='line'>ou: users
</span><span class='line'>
</span><span class='line'>dn: <span class="nv">ou</span><span class="o">=</span>groups,dc<span class="o">=</span>example,dc<span class="o">=</span>com
</span><span class='line'>objectClass: organizationalUnit
</span><span class='line'>ou: groups
</span><span class='line'>
</span><span class='line'>dn: <span class="nv">uid</span><span class="o">=</span>bill,ou<span class="o">=</span>users,dc<span class="o">=</span>example,dc<span class="o">=</span>com
</span><span class='line'>objectClass: inetOrgPerson
</span><span class='line'>objectClass: posixAccount
</span><span class='line'>objectClass: shadowAccount
</span><span class='line'>uid: bill
</span><span class='line'>sn: Chu
</span><span class='line'>givenName: Bill
</span><span class='line'>cn: Bill Chu
</span><span class='line'>displayName: Bill Chu
</span><span class='line'>uidNumber: 1000
</span><span class='line'>gidNumber: 10000
</span><span class='line'>userPassword: password
</span><span class='line'>gecos: Bill Chu
</span><span class='line'>loginShell: /bin/bash
</span><span class='line'>homeDirectory: /home/bill
</span><span class='line'>shadowExpire: -1
</span><span class='line'>shadowFlag: 0
</span><span class='line'>shadowWarning: 7
</span><span class='line'>shadowMin: 8
</span><span class='line'>shadowMax: 999999
</span><span class='line'>shadowLastChange: 10877
</span><span class='line'>mail: bill.chu@example.com
</span><span class='line'>l: Cardiff
</span><span class='line'>o: Comtech
</span><span class='line'>title: System Administrator
</span><span class='line'>postalAddress:
</span><span class='line'>initials: BC
</span><span class='line'>
</span><span class='line'>dn: <span class="nv">cn</span><span class="o">=</span>example,ou<span class="o">=</span>groups,dc<span class="o">=</span>example,dc<span class="o">=</span>com
</span><span class='line'>objectClass: posixGroup
</span><span class='line'>cn: comtech
</span><span class='line'>gidNumber: 10000
</span></code></pre></td></tr></table></div></figure>


<p>这里添加了一个管理员<code>admin</code>和一个用户<code>bill</code>。</p>

<ul>
<li>使用下面命令导入：</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo ldapadd -Y EXTERNAL -H ldapi:/// -f backend.ldif
</span><span class='line'><span class="nv">$ </span>sudo ldapadd -x -D <span class="nv">cn</span><span class="o">=</span>admin,dc<span class="o">=</span>example,dc<span class="o">=</span>com -W -f organization.ldif
</span></code></pre></td></tr></table></div></figure>


<h3>安装ProFTPD</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install proftpd-mod-ldap
</span></code></pre></td></tr></table></div></figure>


<p>这个<code>deb</code>包包含了编译的<code>ldap</code>模块（<code>mod_ldap</code>）。</p>

<h3>配置ProFTPD</h3>

<ul>
<li>修改<code>/etc/proftpd/proftpd.conf</code>：</li>
</ul>


<p>去掉下面几行注释：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>DefaultRoot       ~
</span><span class='line'>RequireValidShell off
</span><span class='line'>
</span><span class='line'>Include /etc/proftpd/ldap.conf
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>修改<code>/etc/proftpd/modules.conf</code>：</li>
</ul>


<p>去掉下面一行注释，加载<code>ldap</code>模块：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>LoadModule mod_ldap.c
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>修改<code>/etc/proftpd/ldap.conf</code>：</li>
</ul>


<p>这个配置文件最为关键：</p>

<figure class='code'><figcaption><span> (ldap.conf)</span> <a href='http://pudgecon.github.io/downloads/code/openldap_and_proftpd/ldap.conf'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;IfModule mod_ldap.c&gt;
</span><span class='line'>LDAPServer ldap://localhost/??sub
</span><span class='line'>LDAPBindDN <span class="s2">&quot;cn=admin,dc=example,dc=com&quot;</span> <span class="s2">&quot;adminPassword&quot;</span>
</span><span class='line'>LDAPUsers <span class="nv">ou</span><span class="o">=</span>users,dc<span class="o">=</span>example,dc<span class="o">=</span>com <span class="o">(</span><span class="nv">uid</span><span class="o">=</span>%u<span class="o">)</span>
</span><span class='line'>
</span><span class='line'>LDAPForceDefaultGID on
</span><span class='line'>LDAPForceDefaultUID on
</span><span class='line'>
</span><span class='line'><span class="c"># proftpd uid &amp; gid                                                             </span>
</span><span class='line'><span class="c"># $ id proftpd                                                                  </span>
</span><span class='line'>LDAPDefaultGID 65534
</span><span class='line'>LDAPDefaultUID 107
</span><span class='line'>
</span><span class='line'><span class="c"># 设置用户的主目录。设置为 /home/ftp 作为 LDAP 用户登录的主目录 注意：要事先创建 /home/ftp 目录，并正确授&gt;</span>
</span><span class='line'>LDAPGenerateHomedir on
</span><span class='line'><span class="c"># $ sudo mkdir /home/ftp                                                        </span>
</span><span class='line'><span class="c"># $ sudo chown proftpd:nogroup /home/ftp                                        </span>
</span><span class='line'>LDAPGenerateHomedirPrefix /home/ftp
</span><span class='line'>LDAPForceGeneratedHomedir on
</span><span class='line'><span class="c"># 在用户主目录下，创建用户个人目录。如果设置为 on，则所有用户共享同一主目录     </span>
</span><span class='line'>LDAPGenerateHomedirPrefixNoUsername off
</span><span class='line'><span class="c"># 如果用户主目录不存在，创建它                                                  </span>
</span><span class='line'>CreateHome on
</span><span class='line'>&lt;/IfModule&gt;
</span></code></pre></td></tr></table></div></figure>


<p>其中的<code>LDAPDefaultUID</code>与<code>LDAPDefaultGID</code>为proftpd用户的<code>uid</code>与<code>gid</code>，可以通过以下命令查看：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>cat /etc/passwd | grep proftpd
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>创建FTP目录</li>
</ul>


<p>以如上配置为例，我们需要在<code>/home</code>目录下建立<code>FTP</code>目录，并赋予相应权限：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo mkdir /home/ftp
</span><span class='line'><span class="nv">$ </span>sudo chown proftpd:nogroup /home/ftp
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>重启<code>ProFTPD</code>服务：</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>service proftpd restart
</span></code></pre></td></tr></table></div></figure>


<h2>参考资料：</h2>

<ul>
<li><a href="http://www.nep-hk.com/drupal/?q=node/150">如何在Ubuntu Desktop 12.04下‧安裝OpenLDAP及SAMBA服務</a></li>
<li><a href="http://www.proftpd.org/docs/contrib/mod_ldap.html">ProFTPD module mod_ldap</a></li>
</ul>


<p><em>有问题请留言，如有错误，欢迎指正。</em></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Proftpd and OpenDJ on Ubuntu Server 12.04]]></title>
    <link href="http://pudgecon.github.io/blog/2013/08/03/proftpd-and-opendj-on-ubuntu/"/>
    <updated>2013-08-03T12:23:00+00:00</updated>
    <id>http://pudgecon.github.io/blog/2013/08/03/proftpd-and-opendj-on-ubuntu</id>
    <content type="html"><![CDATA[<h2>在Ubuntu 12.04上实现proftpd基于OpenDJ的LDAP身份认证</h2>

<h3>系统环境</h3>

<ul>
<li>操作系统：Ubuntu Server 12.04</li>
<li>OpenDJ:
<a href="https://download.forgerock.com/downloads/enterprise/opendj/2.6.0/opendj_2.6.0-1_all.deb">opendj_2.6.0-1_all.deb</a></li>
<li>Proftpd: 1.3.4a</li>
</ul>


<!-- more -->


<h3>安装OpenDJ</h3>

<ol>
<li>安装<code>OpenDJ</code>前，首先安装JAVA环境。</li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install default-jre
</span></code></pre></td></tr></table></div></figure>


<p>可以使用</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>java -version
</span><span class='line'>java version <span class="s2">&quot;1.6.0_27&quot;</span>
</span><span class='line'>OpenJDK Runtime Environment <span class="o">(</span>IcedTea6 1.12.6<span class="o">)</span>
</span><span class='line'><span class="o">(</span>6b27-1.12.6-1ubuntu0.12.04.2<span class="o">)</span>
</span><span class='line'>OpenJDK 64-Bit Server VM <span class="o">(</span>build 20.0-b12, mixed mode<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>查看安装的<code>JAVA</code>版本。</p>

<ol>
<li>下载<code>OpenDJ</code>的<code>deb</code>安装包。安装命令：</li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo dpkg -i /path/to/opendj_2.6.0-1_all.deb
</span><span class='line'>Selecting previously unselected package opendj.
</span><span class='line'><span class="o">(</span>Reading database ... 185569 files and directories currently installed.<span class="o">)</span>
</span><span class='line'>Unpacking opendj <span class="o">(</span>from opendj_2.6.0-1_all.deb<span class="o">)</span> ...
</span><span class='line'>
</span><span class='line'>Setting up opendj <span class="o">(</span>2.6.0<span class="o">)</span> ...
</span></code></pre></td></tr></table></div></figure>


<p><code>.deb</code>安装包将<code>OpenDJ</code>安装在<code>/opt/opendj</code>.</p>

<p>安装的文件默认是属于<code>root</code>的（owned by root by default），以便于<code>OpenDJ</code>更方便地监听<code>389</code>和<code>636</code>端口。</p>

<ol>
<li>配置<code>OpenDJ</code>：</li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>/path/to/opendj/setup --cli
</span><span class='line'>READ THIS SOFTWARE LICENSE AGREEMENT CAREFULLY. BY DOWNLOADING OR
</span><span class='line'>INSTALLING
</span><span class='line'>THE FORGEROCK SOFTWARE, YOU, ON BEHALF OF YOURSELF AND YOUR COMPANY,
</span><span class='line'>AGREE TO
</span><span class='line'>BE BOUND BY THIS SOFTWARE LICENSE AGREEMENT. IF YOU DO NOT AGREE TO
</span><span class='line'>THESE
</span><span class='line'>TERMS, DO NOT DOWNLOAD OR INSTALL THE FORGEROCK SOFTWARE.
</span><span class='line'>
</span><span class='line'>...
</span><span class='line'>
</span><span class='line'>Please <span class="nb">read </span>the License Agreement above.
</span><span class='line'>You must accept the terms of the agreement before continuing with the
</span><span class='line'>installation.
</span><span class='line'>Accept the license <span class="o">(</span>Yes/No<span class="o">)</span> <span class="o">[</span>No<span class="o">]</span>:Yes
</span><span class='line'>
</span><span class='line'>What would you like to use as the initial root user DN <span class="k">for </span>the Directory
</span><span class='line'>Server? <span class="o">[</span><span class="nv">cn</span><span class="o">=</span>Directory Manager<span class="o">]</span>:
</span><span class='line'>Please provide the password to use <span class="k">for </span>the initial root user:
</span><span class='line'>Please re-enter the password <span class="k">for </span>confirmation:
</span><span class='line'>
</span><span class='line'>Provide the fully-qualified directory server host name that will be used when
</span><span class='line'>generating self-signed certificates <span class="k">for </span>LDAP SSL/StartTLS, the administration
</span><span class='line'>connector, and replication <span class="o">[</span>opendj.example.com<span class="o">]</span>: localhost
</span><span class='line'>
</span><span class='line'>On which port would you like the Directory Server to accept connections from
</span><span class='line'>LDAP clients? <span class="o">[</span>389<span class="o">]</span>:
</span><span class='line'>
</span><span class='line'>On which port would you like the Administration Connector to accept
</span><span class='line'>connections? <span class="o">[</span>4444<span class="o">]</span>:
</span><span class='line'>
</span><span class='line'>Do you want to create base DNs in the server? <span class="o">(</span>yes / no<span class="o">)</span> <span class="o">[</span>yes<span class="o">]</span>:
</span><span class='line'>
</span><span class='line'>Provide the base DN <span class="k">for </span>the directory data: <span class="nv">dc</span><span class="o">=</span>example,dc<span class="o">=</span>com
</span><span class='line'>Options <span class="k">for </span>populating the database:
</span><span class='line'>
</span><span class='line'>    1<span class="o">)</span>  Only create the base entry
</span><span class='line'>    2<span class="o">)</span>  Leave the database empty
</span><span class='line'>    3<span class="o">)</span>  Import data from an LDIF file
</span><span class='line'>    4<span class="o">)</span>  Load automatically-generated sample data
</span><span class='line'>
</span><span class='line'>Enter choice <span class="o">[</span>1<span class="o">]</span>: 1
</span><span class='line'>
</span><span class='line'>Do you want to <span class="nb">enable </span>SSL? <span class="o">(</span>yes / no<span class="o">)</span> <span class="o">[</span>no<span class="o">]</span>:
</span><span class='line'>
</span><span class='line'>Do you want to <span class="nb">enable </span>Start TLS? <span class="o">(</span>yes / no<span class="o">)</span> <span class="o">[</span>no<span class="o">]</span>:
</span><span class='line'>
</span><span class='line'>Do you want to start the server when the configuration is completed? <span class="o">(</span>yes / no<span class="o">)</span> <span class="o">[</span>yes<span class="o">]</span>:
</span><span class='line'>
</span><span class='line'>Setup <span class="nv">Summary</span>
</span><span class='line'><span class="o">=============</span>
</span><span class='line'>LDAP Listener Port:            389
</span><span class='line'>Administration Connector Port: 4444
</span><span class='line'>LDAP Secure Access:            disabled
</span><span class='line'>Root User DN:                  <span class="nv">cn</span><span class="o">=</span>Directory Manager
</span><span class='line'>Directory Data:                Create New Base DN <span class="nv">dc</span><span class="o">=</span>example,dc<span class="o">=</span>com.
</span><span class='line'>Base DN Data: Only Create Base Entry <span class="o">(</span><span class="nv">dc</span><span class="o">=</span>example,dc<span class="o">=</span>com<span class="o">)</span>
</span><span class='line'>
</span><span class='line'>Start Server when the configuration is completed
</span><span class='line'>
</span><span class='line'>What would you like to <span class="k">do</span>?
</span><span class='line'>
</span><span class='line'>    1<span class="o">)</span>  Set up the server with the parameters above
</span><span class='line'>    2<span class="o">)</span>  Provide the setup parameters again
</span><span class='line'>    3<span class="o">)</span>  Print equivalent non-interactive <span class="nb">command</span>-line
</span><span class='line'>    4<span class="o">)</span>  Cancel and <span class="nb">exit</span>
</span><span class='line'><span class="nb"> </span>
</span><span class='line'>Enter choice <span class="o">[</span>1<span class="o">]</span>:
</span><span class='line'>
</span><span class='line'>See /var/.../opendj-setup...log <span class="k">for </span>a detailed log of this operation.
</span><span class='line'>
</span><span class='line'>Configuring Directory Server ..... Done.
</span><span class='line'>Importing LDIF file /path/to/Example.ldif ........... Done.
</span><span class='line'>Starting Directory Server ........... Done.
</span><span class='line'>
</span><span class='line'>To see basic server configuration status and configuration you can
</span><span class='line'>launch <span class="se">\</span>
</span><span class='line'>/path/to/opendj/bin/status
</span></code></pre></td></tr></table></div></figure>


<p>基本上可以采用默认配置，除了<em>server host name</em>、<em>密码</em>以及<em>base DN</em>。</p>

<ol>
<li>检查<code>OpenDJ</code>状态：</li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo /opt/opendj/bin/status
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>&gt;&gt;&gt;&gt; Specify OpenDJ LDAP connection parameters
</span><span class='line'>
</span><span class='line'>Administrator user <span class="nb">bind </span>DN <span class="o">[</span><span class="nv">cn</span><span class="o">=</span>Directory Manager<span class="o">]</span>:
</span><span class='line'>
</span><span class='line'>Password <span class="k">for </span>user <span class="s1">&#39;cn=Directory Manager&#39;</span>:
</span><span class='line'>
</span><span class='line'>          --- Server Status ---
</span><span class='line'>Server Run Status:        Started
</span><span class='line'>Open Connections:         1
</span><span class='line'>
</span><span class='line'>          --- Server Details ---
</span><span class='line'>Host Name:                ubuntu.example.com
</span><span class='line'>Administrative Users:     <span class="nv">cn</span><span class="o">=</span>Directory Manager
</span><span class='line'>Installation Path:        /opt/opendj
</span><span class='line'>Version:                  OpenDJ 2.6.0
</span><span class='line'>Java Version:             version
</span><span class='line'>Administration Connector: Port 4444 <span class="o">(</span>LDAPS<span class="o">)</span>
</span><span class='line'>
</span><span class='line'>          --- Connection Handlers ---
</span><span class='line'>Address:Port : Protocol               : State
</span><span class='line'>-------------:------------------------:---------
</span><span class='line'>--           : LDIF                   : Disabled
</span><span class='line'>0.0.0.0:161  : SNMP                   : Disabled
</span><span class='line'>0.0.0.0:389  : LDAP <span class="o">(</span>allows StartTLS<span class="o">)</span> : Enabled
</span><span class='line'>0.0.0.0:636  : LDAPS                  : Enabled
</span><span class='line'>0.0.0.0:1689 : JMX                    : Disabled
</span><span class='line'>0.0.0.0:8080 : HTTP                   : Disabled
</span><span class='line'>
</span><span class='line'>          --- Data Sources ---
</span><span class='line'>Base DN:     <span class="nv">dc</span><span class="o">=</span>example,dc<span class="o">=</span>com
</span><span class='line'>Backend ID:  userRoot
</span><span class='line'>Entries:     2002
</span><span class='line'>Replication:
</span></code></pre></td></tr></table></div></figure>


<p>如出现上述，则表明安装成功。</p>

<h3>安装Proftpd</h3>

<ol>
<li>Proftpd可以直接使用apt-get安装：</li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install proftpd-mod-ldap
</span></code></pre></td></tr></table></div></figure>


<p>采用<code>standalone</code>方式安装</p>

<ol>
<li>修改配置文件 <code>/etc/proftpd/modules.conf</code></li>
</ol>


<p>将<code>25行</code>左右的注释打开，结果如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>LoadModule mod_ldap.c
</span></code></pre></td></tr></table></div></figure>


<ol>
<li>修改配置文件<code>/etc/proftpd/proftpd.conf</code></li>
</ol>


<p>将<code>132行</code>左右的注释打开，结果如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Include /etc/proftpd/ldap.conf
</span></code></pre></td></tr></table></div></figure>


<ol>
<li>最后是修改配置文件<code>/etc/proftpd/ldap.conf</code>，这步是最为关键的。</li>
</ol>


<p>首先，我们使用OpenDJ提供的<a href="http://opendj.forgerock.org/Example.ldif"><code>Example.ldif</code></a>生成一些测试数据：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo /opt/opendj/bin/stop-ds <span class="c"># 首先停止OpenDJ</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo /opt/opendj/bin/import-ldif <span class="se">\</span>
</span><span class='line'> -b <span class="nv">dc</span><span class="o">=</span>example,dc<span class="o">=</span>com <span class="se">\</span>
</span><span class='line'> -n userRoot <span class="se">\</span>
</span><span class='line'> -l /path/to/Example.ldif
</span></code></pre></td></tr></table></div></figure>


<p>可以使用以下命令检测是否导入成功：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo /opt/opendj/bin/ldapsearch <span class="se">\</span>
</span><span class='line'>  -b <span class="nv">dc</span><span class="o">=</span>example,dc<span class="o">=</span>com <span class="se">\</span>
</span><span class='line'>  -D <span class="s2">&quot;cn=Directory Manager&quot;</span> <span class="se">\</span>
</span><span class='line'>  -w 123456 <span class="se">\</span>
</span><span class='line'>  <span class="s2">&quot;(cn=Sam Carter)&quot;</span>
</span><span class='line'>
</span><span class='line'>dn: <span class="nv">uid</span><span class="o">=</span>scarter,ou<span class="o">=</span>People,dc<span class="o">=</span>example,dc<span class="o">=</span>com
</span><span class='line'>uid: scarter
</span><span class='line'>userPassword: <span class="o">{</span>SSHA<span class="o">}</span>FwNrH209JqP/KjHKRTzEUFMKQYuaHeVf5u9GlQ<span class="o">==</span>
</span><span class='line'>facsimileTelephoneNumber: +1 408 555 9751
</span><span class='line'>departmentNumber: 1000
</span><span class='line'>preferredLanguage: en-gb
</span><span class='line'>givenName: Sam
</span><span class='line'>objectClass: person
</span><span class='line'>objectClass: organizationalPerson
</span><span class='line'>objectClass: inetOrgPerson
</span><span class='line'>objectClass: posixAccount
</span><span class='line'>objectClass: top
</span><span class='line'>cn: Sam Carter
</span><span class='line'>sn: Carter
</span><span class='line'>telephoneNumber: +1 408 555 4798
</span><span class='line'>street: 60 Queen Square
</span><span class='line'>homeDirectory: /home/scarter
</span><span class='line'>roomNumber: 4612
</span><span class='line'>l: Bristol
</span><span class='line'>mail: scarter@example.com
</span><span class='line'>uidNumber: 1002
</span><span class='line'>ou: Accounting
</span><span class='line'>ou: People
</span><span class='line'>gidNumber: 1000
</span></code></pre></td></tr></table></div></figure>


<p>重新启动<code>OpenDJ</code>：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo /opt/opendj/bin/start-ds
</span></code></pre></td></tr></table></div></figure>


<p>修改配置文件<code>/etc/proftpd/ldap.conf</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;IfModule mod_ldap.c&gt;
</span><span class='line'>LDAPServer ldap://localhost/??sub
</span><span class='line'>LDAPBindDN <span class="s2">&quot;cn=scarter,dc=example,dc=com&quot;</span> <span class="s2">&quot;sprain&quot;</span>
</span><span class='line'>LDAPUsers <span class="nv">dc</span><span class="o">=</span>example,dc<span class="o">=</span>com <span class="o">(</span><span class="nv">uid</span><span class="o">=</span>%u<span class="o">)</span> <span class="o">(</span><span class="nv">uidNumber</span><span class="o">=</span>%u<span class="o">)</span>
</span><span class='line'>&lt;/IfModule&gt;
</span></code></pre></td></tr></table></div></figure>


<p>这里的<code>LDAPServer</code>为配置<code>OpenDJ</code>时填的<code>Hostname</code>，本例子为<code>localhost</code>。</p>

<p>注意这后面的<code>/??sub</code>，它指定了LDAP的<code>SearchScopr</code>为<code>wholeSubtree</code>，否则ftp连接时，查询的请求scope为<code>baseObject</code>，就查不到想要的结果了。</p>

<p><code>LDAPBindDN</code>为我们在Example.ldif里面挑的<code>Accounting Managers</code>之一。</p>

<p>到这里，当我们用FTP客户端连接我们的FTP服务器的时候，通过<code>/opt/opendj/logs/access</code>我们可以发现，其实我们已经可以连接上LDAP的Directory Server了，但是还不能验通过，这里有两个步骤是必须实现的：</p>

<ol>
<li><p>为用户创建目录<code>/home/ftp_username</code>。</p></li>
<li><p>完成上步，还需要修改<code>/etc/proftpd/proftpd.conf</code>，将<code>38行</code>左右的注释打开：</p></li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>RequireValidShell off
</span></code></pre></td></tr></table></div></figure>


<p>否则proftpd日志里会记录</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Aug 05 10:58:31 HOSTNAME proftpd<span class="o">[</span>1636<span class="o">]</span> HOSTNAME
</span><span class='line'><span class="o">(</span>192.168.1.106<span class="o">[</span>192.168.1.106<span class="o">])</span>: USER LOGINUSER <span class="o">(</span>Login failed<span class="o">)</span>: Invalid
</span><span class='line'>shell: <span class="s1">&#39;&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>完成！</h3>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Window freezed after Ctrl+s when using tmux]]></title>
    <link href="http://pudgecon.github.io/blog/2013/07/31/window-freezed-after-ctrl-plus-s-when-using-tmux/"/>
    <updated>2013-07-31T22:52:00+00:00</updated>
    <id>http://pudgecon.github.io/blog/2013/07/31/window-freezed-after-ctrl-plus-s-when-using-tmux</id>
    <content type="html"><![CDATA[<p><a href="http://en.wikipedia.org/wiki/Tmux">Tmux</a>是服务器端常用的一个神器，</p>

<p>使用Tmux的时候，经常会不小心按到<code>Ctrl+s</code>，结果就是导致当前<code>Terminal</code>窗口冻结住了，无法接收任何输入。</p>

<p>解决方法：<code>Ctrl+q</code>。</p>

<!-- more -->


<h3>相关链接：</h3>

<ul>
<li><p><a href="http://happycasts.net">Happycasts</a>的<a href="http://happycasts.net/episodes/41">Tmux视频</a></p></li>
<li><p><a href="http://en.wikipedia.org/wiki/Tmux">Tmux Wiki</a></p></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ctrl+z in linux terminal]]></title>
    <link href="http://pudgecon.github.io/blog/2013/07/27/ctrl-plus-z-in-linux-terminal/"/>
    <updated>2013-07-27T10:35:00+00:00</updated>
    <id>http://pudgecon.github.io/blog/2013/07/27/ctrl-plus-z-in-linux-terminal</id>
    <content type="html"><![CDATA[<p>用惯Windows的人，刚转到Linux下经常会碰到一个<strong>囧</strong>境：</p>

<p>使用终端（<code>Terminal</code>）的时候，经常会下意识地按下Windows下的撤销组合键：<code>Ctrl+z</code>，结果经常会导致目前的工作突然不见了，然后又会下意识地直接关闭<code>Terminal</code>，然后又会经常发现诸如<em>文件缓存已存在</em>，<em>端口已被占用</em>等等情况。</p>

<p>其实在Linux下，<code>Ctrl+z</code>是挂起（<code>suspend</code>）一个任务的命令：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>^Z
</span><span class='line'><span class="o">[</span>1<span class="o">]</span>  + 6084 suspended  noglob rake preview
</span></code></pre></td></tr></table></div></figure>


<p>这时我们要做的工作，不是直接<code>X</code>掉<code>Terminal</code>，而是应该唤回我们被挂起的工作。如果唤回在Linux下被挂起的任务，是本篇要讲的内容。</p>

<!-- more -->


<p>以下是几条常用的命令：</p>

<ul>
<li>jobs</li>
</ul>


<p><code>jobs</code>命令可以查看后台的工作状态：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">jobs</span>
</span><span class='line'><span class="o">[</span>1<span class="o">]</span>  + suspended  noglob rake preview
</span></code></pre></td></tr></table></div></figure>


<p>终端显示有一个任务被挂起（suspended）。接下来有两种选择：<code>bg</code>和<code>fg</code></p>

<ul>
<li>bg</li>
</ul>


<p><code>bg %jobnumber</code>命令可以将任务放到后台执行</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">bg</span>
</span><span class='line'><span class="o">[</span>1<span class="o">]</span>  + 6084 continued  noglob rake preview
</span></code></pre></td></tr></table></div></figure>


<p>终端显示有任务被继续了。</p>

<p>这时任务还是在后台继续执行的，我们时不时可能会看到一些输出信息显示在终端上。</p>

<ul>
<li>bg</li>
</ul>


<p>如果要把任务拿到前台来进行处理的话，就需要使用<code>fg</code>命令。</p>

<p>当只有一个后台任务的话，可能直接执行<code>fg</code>命令，否则就要在其后跟上<code>jobs</code>命令里显示的任务号（job number）。</p>

<h4>P.S.</h4>

<p>经常忘记这个命令，记下来提醒自己。<strong>求轻喷。</strong></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[auto hide sidebar like google plus with pure css implemention]]></title>
    <link href="http://pudgecon.github.io/blog/2013/07/26/auto-hide-sidebar-like-google-plus-with-pure-css-implemention/"/>
    <updated>2013-07-26T20:18:00+00:00</updated>
    <id>http://pudgecon.github.io/blog/2013/07/26/auto-hide-sidebar-like-google-plus-with-pure-css-implemention</id>
    <content type="html"><![CDATA[<h2>纯CSS实现的类似<a href="https://plus.google.com/">google+</a>的自动隐藏的侧边栏</h2>

<p><link href="http://pudgecon.github.io/stylesheets/google-plus-example.css" rel="stylesheet"></link></p>

<h3>先看结果：</h3>

<p>将鼠标放在<code>HOME</code>按钮上，出现侧边栏。</p>

<div class="example google-plus-example">
  <div class="nav">
    <div class="home">
      <span class="icon icon-home"></span>
      <span>Home</span>
      <span>></span>
    </div>
    <div class="sidebar">
      <ul>
        <li>
          <span class="icon icon-home"></span>
          <span>Home</span>
        </li>
        <li class="devider"></li>
        <li>
          <span class="icon icon-profile"></span>
          <span>Profile</span>
        </li>
        <li>
          <span class="icon icon-circles"></span>
          <span>Circles</span>
        </li>
        <li>
          <span class="icon icon-photos"></span>
          <span>Photos</span>
        </li>
        <li class="divider"></li>
      </ul>
    </div>
  </div>
</div>




<!-- more -->


<p>之前我们 <a href="http://discuss.emberjs.cn">Ember JS 论坛</a>的QQ群上有人问起这个问题，现在我将自己的一个解决方案记下来。</p>

<p>我觉得之前更多的处理方法是采用<code>javascript</code>的方式来处理鼠标悬浮事件，而貌似比较少采用纯<code>CSS</code>的方式来处理，因此我觉得有记下来的一点意义。</p>

<h3>首先先整理一下思路：</h3>

<ol>
<li><p> 以某种方式隐藏侧边栏（sidebar）;</p></li>
<li><p> 处理按钮的<code>hover</code>样式，以某种方式使sidebar出现;</p></li>
<li><p> 处理sidebar的<code>hover</code>样式，以免当鼠标移出按钮区域，但还在sidebar上时，sidebar隐藏了;</p></li>
<li><p> 适当加入一点点渐近效果。</p></li>
</ol>


<h3>开始实践：</h3>

<ul>
<li>首先是外层的wrapper的样式：</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.google-plus-example</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">position</span><span class="o">:</span> <span class="k">relative</span><span class="p">;</span>
</span><span class='line'>  <span class="k">overflow</span><span class="o">:</span> <span class="k">hidden</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>将他的<code>position</code>设置为<code>relative</code>，这样内部的元素就以它为基准了（?）。</p>

<p>并且，设置它的<code>overflow</code>为<code>hidden</code>，这样我们下一步的sidebar躲起来的时候就不会露出来了。</p>

<ul>
<li>sidebar 原始样式</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.sidebar</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">position</span><span class="o">:</span> <span class="k">absolute</span><span class="p">;</span>
</span><span class='line'>  <span class="k">top</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'>  <span class="k">left</span><span class="o">:</span> <span class="m">-200px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">bottom</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>把它的<code>left</code>设置为<code>-200px</code>，让它躲在我们看不见的地方。具体这里为什么是<code>left</code>而不是直接隐藏起来，我们后面讲。</p>

<ul>
<li>然后是设置按钮的悬浮（hover）样式</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.home</span><span class="nd">:hover</span> <span class="o">+</span> <span class="nc">.sidebar</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">left</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>这个CSS的作用是，当.home有鼠标悬浮（<code>:hover</code>）时，设置.sidebar的样式。</p>

<p>这里的<code>.home</code>指的就是HOME按钮。</p>

<p>把sidebar的<code>left</code>设回<code>0</code>，这样sidebar就出现了。</p>

<ul>
<li>接下来是设置sidebar的hover样式，使得当鼠标不在按钮上面，但在它自身上面时，不隐藏</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.sidebar</span><span class="nd">:hover</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">left</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>与上面是一样的。</p>

<ul>
<li>最后，可能给它加一点点效果。</li>
</ul>


<p>给sidebar加<code>transition</code>样式，指定为<code>left</code>变化时有效果：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.sidebar</span> <span class="p">{</span>
</span><span class='line'>  <span class="o">-</span><span class="n">webkit</span><span class="o">-</span><span class="n">transition</span><span class="o">:</span> <span class="k">left</span> <span class="m">.1s</span> <span class="m">.1s</span> <span class="n">linear</span><span class="p">;</span>
</span><span class='line'>     <span class="o">-</span><span class="n">moz</span><span class="o">-</span><span class="n">transition</span><span class="o">:</span> <span class="k">left</span> <span class="m">.1s</span> <span class="m">.1s</span> <span class="n">linear</span><span class="p">;</span>
</span><span class='line'>       <span class="o">-</span><span class="n">o</span><span class="o">-</span><span class="n">transition</span><span class="o">:</span> <span class="k">left</span> <span class="m">.1s</span> <span class="m">.1s</span> <span class="n">linear</span><span class="p">;</span>
</span><span class='line'>          <span class="n">transition</span><span class="o">:</span> <span class="k">left</span> <span class="m">.1s</span> <span class="m">.1s</span> <span class="n">linear</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>给sidebar出现时添加一个阴影效果：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.sidebar</span><span class="nd">:hover</span><span class="o">,</span>
</span><span class='line'><span class="nc">.home</span><span class="nd">:hover</span> <span class="o">+</span> <span class="nc">.sidebar</span> <span class="p">{</span>
</span><span class='line'>  <span class="o">-</span><span class="n">webkit</span><span class="o">-</span><span class="n">box</span><span class="o">-</span><span class="n">shadow</span><span class="o">:</span> <span class="m">0</span> <span class="m">0</span> <span class="m">40px</span> <span class="n">rgba</span><span class="p">(</span><span class="m">0</span><span class="o">,</span><span class="m">0</span><span class="o">,</span><span class="m">0</span><span class="o">,.</span><span class="m">4</span><span class="p">);</span>
</span><span class='line'>     <span class="o">-</span><span class="n">moz</span><span class="o">-</span><span class="n">box</span><span class="o">-</span><span class="n">shadow</span><span class="o">:</span> <span class="m">0</span> <span class="m">0</span> <span class="m">40px</span> <span class="n">rgba</span><span class="p">(</span><span class="m">0</span><span class="o">,</span><span class="m">0</span><span class="o">,</span><span class="m">0</span><span class="o">,.</span><span class="m">4</span><span class="p">);</span>
</span><span class='line'>       <span class="o">-</span><span class="n">o</span><span class="o">-</span><span class="n">box</span><span class="o">-</span><span class="n">shadow</span><span class="o">:</span> <span class="m">0</span> <span class="m">0</span> <span class="m">40px</span> <span class="n">rgba</span><span class="p">(</span><span class="m">0</span><span class="o">,</span><span class="m">0</span><span class="o">,</span><span class="m">0</span><span class="o">,.</span><span class="m">4</span><span class="p">);</span>
</span><span class='line'>          <span class="n">box</span><span class="o">-</span><span class="n">shadow</span><span class="o">:</span> <span class="m">0</span> <span class="m">0</span> <span class="m">40px</span> <span class="n">rgba</span><span class="p">(</span><span class="m">0</span><span class="o">,</span><span class="m">0</span><span class="o">,</span><span class="m">0</span><span class="o">,.</span><span class="m">4</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>整体思路就是这样。</p>

<h3>历史遗留问题</h3>

<p>最后再来说说上面遗留的问题，为什么使用<code>left</code>属性而不是使用<code>display</code>属性。</p>

<p>其实，使用<code>display</code>属性是没有问题，初始情况下，设置<code>sidebar</code>的<code>display</code>属性为<code>none;</code>，当<code>hover</code>的时候将其的<code>display</code>属性设置为<code>block;</code>，问题是使用这个好像<code>transition</code>对其没有效果，所以我的选择是：使用<code>left</code>。希望知道其中奥妙的童鞋给我一个答案吧。</p>

<h3>P.S.</h3>

<p>贴上面示例的代码：</p>

<figure class='code'><figcaption><span> (google-plus-example.html)</span> <a href='http://pudgecon.github.io/downloads/code/google-plus-example.html'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;example google-plus-example&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;nav&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;home&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;icon icon-home&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span&gt;</span>Home<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span&gt;</span>&gt;<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;sidebar&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;ul&gt;</span>
</span><span class='line'>        <span class="nt">&lt;li&gt;</span>
</span><span class='line'>          <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;icon icon-home&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>
</span><span class='line'>          <span class="nt">&lt;span&gt;</span>Home<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/li&gt;</span>
</span><span class='line'>        <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">&quot;devider&quot;</span><span class="nt">&gt;&lt;/li&gt;</span>
</span><span class='line'>        <span class="nt">&lt;li&gt;</span>
</span><span class='line'>          <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;icon icon-profile&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>
</span><span class='line'>          <span class="nt">&lt;span&gt;</span>Profile<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/li&gt;</span>
</span><span class='line'>        <span class="nt">&lt;li&gt;</span>
</span><span class='line'>          <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;icon icon-circles&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>
</span><span class='line'>          <span class="nt">&lt;span&gt;</span>Circles<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/li&gt;</span>
</span><span class='line'>        <span class="nt">&lt;li&gt;</span>
</span><span class='line'>          <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;icon icon-photos&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>
</span><span class='line'>          <span class="nt">&lt;span&gt;</span>Photos<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/li&gt;</span>
</span><span class='line'>        <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">&quot;divider&quot;</span><span class="nt">&gt;&lt;/li&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/ul&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span> (google-plus-example.css)</span> <a href='http://pudgecon.github.io/downloads/code/google-plus-example.css'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.example</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">border</span><span class="o">:</span> <span class="m">1px</span> <span class="k">solid</span> <span class="nb">gray</span><span class="p">;</span>
</span><span class='line'>  <span class="k">position</span><span class="o">:</span> <span class="k">relative</span><span class="p">;</span>
</span><span class='line'>  <span class="k">overflow</span><span class="o">:</span> <span class="k">hidden</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.example.google-plus-example</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">height</span><span class="o">:</span> <span class="m">250px</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.icon</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">height</span><span class="o">:</span> <span class="m">18px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">width</span><span class="o">:</span> <span class="m">20px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">display</span><span class="o">:</span> <span class="k">inline</span><span class="o">-</span><span class="k">block</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.icon-home</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">background</span><span class="o">:</span> <span class="sx">url(&quot;/images/google_plus.png&quot;)</span> <span class="m">-21px</span> <span class="m">-66px</span> <span class="k">no-repeat</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.icon-profile</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">background</span><span class="o">:</span> <span class="sx">url(&quot;/images/google_plus.png&quot;)</span> <span class="m">-59px</span> <span class="m">-85px</span> <span class="k">no-repeat</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.icon-circles</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">background</span><span class="o">:</span> <span class="sx">url(&quot;/images/google_plus.png&quot;)</span> <span class="m">-21px</span> <span class="m">-85px</span> <span class="k">no-repeat</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.icon-photos</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">background</span><span class="o">:</span> <span class="sx">url(&quot;/images/google_plus.png&quot;)</span> <span class="m">0</span> <span class="m">-66px</span> <span class="k">no-repeat</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.google-plus-example</span> <span class="nc">.nav</span> <span class="nc">.home</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">padding</span><span class="o">:</span> <span class="m">12px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">color</span><span class="o">:</span> <span class="m">#737373</span><span class="p">;</span>
</span><span class='line'>  <span class="k">display</span><span class="o">:</span> <span class="k">inline</span><span class="o">-</span><span class="k">block</span><span class="p">;</span>
</span><span class='line'>  <span class="k">font-size</span><span class="o">:</span> <span class="m">14px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">margin-bottom</span><span class="o">:</span> <span class="m">2px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">margin-right</span><span class="o">:</span> <span class="m">4px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">max-width</span><span class="o">:</span> <span class="m">162px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">overflow</span><span class="o">:</span> <span class="k">hidden</span><span class="p">;</span>
</span><span class='line'>  <span class="k">text</span><span class="o">-</span><span class="k">overflow</span><span class="o">:</span> <span class="n">ellipsis</span><span class="p">;</span>
</span><span class='line'>  <span class="k">vertical-align</span><span class="o">:</span> <span class="k">bottom</span><span class="p">;</span>
</span><span class='line'>  <span class="k">cursor</span><span class="o">:</span> <span class="k">pointer</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.google-plus-example</span> <span class="nc">.sidebar</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">width</span><span class="o">:</span> <span class="m">200px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">position</span><span class="o">:</span> <span class="k">absolute</span><span class="p">;</span>
</span><span class='line'>  <span class="k">top</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'>  <span class="k">left</span><span class="o">:</span> <span class="m">-200px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">bottom</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'>  <span class="k">background</span><span class="o">:</span> <span class="nb">white</span><span class="p">;</span>
</span><span class='line'>  <span class="o">-</span><span class="n">webkit</span><span class="o">-</span><span class="n">transition</span><span class="o">:</span> <span class="k">left</span> <span class="m">.1s</span> <span class="m">.1s</span> <span class="n">linear</span><span class="p">;</span>
</span><span class='line'>     <span class="o">-</span><span class="n">moz</span><span class="o">-</span><span class="n">transition</span><span class="o">:</span> <span class="k">left</span> <span class="m">.1s</span> <span class="m">.1s</span> <span class="n">linear</span><span class="p">;</span>
</span><span class='line'>       <span class="o">-</span><span class="n">o</span><span class="o">-</span><span class="n">transition</span><span class="o">:</span> <span class="k">left</span> <span class="m">.1s</span> <span class="m">.1s</span> <span class="n">linear</span><span class="p">;</span>
</span><span class='line'>          <span class="n">transition</span><span class="o">:</span> <span class="k">left</span> <span class="m">.1s</span> <span class="m">.1s</span> <span class="n">linear</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.google-plus-example</span> <span class="nc">.nav</span> <span class="nc">.sidebar</span><span class="nd">:hover</span><span class="o">,</span>
</span><span class='line'><span class="nc">.google-plus-example</span> <span class="nc">.nav</span> <span class="nc">.home</span><span class="nd">:hover</span> <span class="o">+</span> <span class="nc">.sidebar</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">left</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'>  <span class="o">-</span><span class="n">webkit</span><span class="o">-</span><span class="n">box</span><span class="o">-</span><span class="n">shadow</span><span class="o">:</span> <span class="m">0</span> <span class="m">0</span> <span class="m">40px</span> <span class="n">rgba</span><span class="p">(</span><span class="m">0</span><span class="o">,</span><span class="m">0</span><span class="o">,</span><span class="m">0</span><span class="o">,.</span><span class="m">4</span><span class="p">);</span>
</span><span class='line'>     <span class="o">-</span><span class="n">moz</span><span class="o">-</span><span class="n">box</span><span class="o">-</span><span class="n">shadow</span><span class="o">:</span> <span class="m">0</span> <span class="m">0</span> <span class="m">40px</span> <span class="n">rgba</span><span class="p">(</span><span class="m">0</span><span class="o">,</span><span class="m">0</span><span class="o">,</span><span class="m">0</span><span class="o">,.</span><span class="m">4</span><span class="p">);</span>
</span><span class='line'>       <span class="o">-</span><span class="n">o</span><span class="o">-</span><span class="n">box</span><span class="o">-</span><span class="n">shadow</span><span class="o">:</span> <span class="m">0</span> <span class="m">0</span> <span class="m">40px</span> <span class="n">rgba</span><span class="p">(</span><span class="m">0</span><span class="o">,</span><span class="m">0</span><span class="o">,</span><span class="m">0</span><span class="o">,.</span><span class="m">4</span><span class="p">);</span>
</span><span class='line'>          <span class="n">box</span><span class="o">-</span><span class="n">shadow</span><span class="o">:</span> <span class="m">0</span> <span class="m">0</span> <span class="m">40px</span> <span class="n">rgba</span><span class="p">(</span><span class="m">0</span><span class="o">,</span><span class="m">0</span><span class="o">,</span><span class="m">0</span><span class="o">,.</span><span class="m">4</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.sidebar</span> <span class="nt">ul</span> <span class="nt">li</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">padding</span><span class="o">:</span> <span class="m">10px</span> <span class="m">20px</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.sidebar</span> <span class="nt">ul</span> <span class="nt">li</span><span class="nd">:not</span><span class="o">(</span><span class="nc">.devider</span><span class="o">)</span><span class="nd">:hover</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">background</span><span class="o">:</span> <span class="m">#EEEEEE</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nc">.sidebar</span> <span class="nt">ul</span> <span class="nt">li</span><span class="nc">.devider</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">padding</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
</feed>
